import{_ as s,o as a,c as l,O as n}from"./chunks/framework.9ae6acb2.js";const d=JSON.parse('{"title":"Oracle","description":"","frontmatter":{},"headers":[],"relativePath":"study/lang-study/oracle.md","filePath":"study/lang-study/oracle.md"}'),p={name:"study/lang-study/oracle.md"},o=n(`<h1 id="oracle" tabindex="-1">Oracle <a class="header-anchor" href="#oracle" aria-label="Permalink to &quot;Oracle&quot;">​</a></h1><h3 id="存储过程" tabindex="-1">存储过程 <a class="header-anchor" href="#存储过程" aria-label="Permalink to &quot;存储过程&quot;">​</a></h3><p>创建存储过程</p><p>有参</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">or</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">replace</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">procedure</span><span style="color:#A6ACCD;"> test_pro(param_1 </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar2</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                                 param_2 </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar2</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                                 param_3 </span><span style="color:#F78C6C;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar2</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">as</span></span>
<span class="line"><span style="color:#A6ACCD;">                                 </span><span style="color:#89DDFF;">//</span><span style="color:#A6ACCD;">声明使用的变量</span></span>
<span class="line"><span style="color:#A6ACCD;">    tets_id </span><span style="color:#C792EA;">VARCHAR2</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">64</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">begin</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    .....</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">end</span><span style="color:#A6ACCD;"> test_pro;</span></span></code></pre></div><p>无参</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">or</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">replace</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">procedure</span><span style="color:#A6ACCD;"> test_pro</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">as</span></span>
<span class="line"><span style="color:#89DDFF;">//</span><span style="color:#A6ACCD;">变量声明</span></span>
<span class="line"><span style="color:#F78C6C;">begin</span></span>
<span class="line"><span style="color:#F78C6C;">end</span><span style="color:#A6ACCD;"> test_pro;</span></span></code></pre></div><h3 id="常用函数" tabindex="-1">常用函数： <a class="header-anchor" href="#常用函数" aria-label="Permalink to &quot;常用函数：&quot;">​</a></h3><p>sys_guid(): 32位序列号，具有世界唯一性。（同一数据）</p><p>sysdate: 获取当日日期，一般与to_char 连用，即to_char(sysdate,&#39;yyyy-MM-dd&#39;)</p><p>replace(org_str,sub_str, val):将org_str中含有的sub_str进行替换为val.</p><p>instr(org_str,sub_str): 判断字符串在那个位置，返回该字符串的索引（字符串默认索引从1开始）。</p><p>regexp_count(source_str,pattern)：返回pattern在字符串出现的次数，如果未找到，返回0。</p><p>decode(expression,condition_1,result_1.condition_2,result_2,...,result_default) :如果expression符合condition_1,则返回result_1，符合condition_2,则返回result_2,如果都不符合，则返回result_default,如果result_defsault不存在，则返回null.</p><h3 id="场景" tabindex="-1">场景 <a class="header-anchor" href="#场景" aria-label="Permalink to &quot;场景&quot;">​</a></h3><p>3.1 字段是否为空</p><ul><li>某个字段不为空：</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> test_table </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> clumn_name </span><span style="color:#F78C6C;">IS NOT NULL</span></span></code></pre></div><ul><li>ISNULL函数</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ISNULL</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">value</span><span style="color:#A6ACCD;">,’</span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;">’) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> table_name</span></span></code></pre></div><p>如果为NULL，返回default,否则返回value.</p><ul><li>isblank函数</li></ul><p>如果为NULL,返回true，不为NULL，返回false</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> IsBlank(</span><span style="color:#F78C6C;">value</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> table_name</span></span></code></pre></div><ul><li>COALESCE函数</li></ul><p>判断一个或多个参数是否为空，并返回第一个不为NULL参数的值，如果全部为NULL,则返回NULL</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">COALESCE</span><span style="color:#A6ACCD;"> (value1, value2, value3) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> table_name</span></span></code></pre></div><ul><li>NVL函数</li></ul><p>检测值是否为NULL。如果value为NULL,返回default,否则返回value</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">SELECT NVL(value,’default’) FROM table_name</span></span></code></pre></div><p>3.2 根据分隔符将某一字段分割为多行</p><p>仅针对一行数据</p><p>chr(10)---oracle的回车符</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;"> regexp_substr(m.NOTE, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">[^</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;">chr(</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">||</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">]+</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">, rownum, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">i</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> NOTENAME</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  m</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CONNECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">BY</span><span style="color:#A6ACCD;">  regexp_substr(m.NOTE, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">[^</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;">chr(</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">||</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">]+</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">, rownum, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">i</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">is not NULL</span></span></code></pre></div><p>3.3 在select 语句中根据不同的值进行映射为其他的值</p><p>可以使用：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">case</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">when</span><span style="color:#A6ACCD;"> condition1 </span><span style="color:#F78C6C;">then</span><span style="color:#A6ACCD;"> val1</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">when</span><span style="color:#A6ACCD;"> condition2 </span><span style="color:#F78C6C;">then</span><span style="color:#A6ACCD;"> val2</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> tablefieid,</span></span></code></pre></div><p>3.4 oracle中没有limit用法，可以根据 rownum进行实现</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> rownum</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F78C6C;">100</span></span></code></pre></div>`,39),e=[o];function t(c,r,C,y,A,i){return a(),l("div",null,e)}const F=s(p,[["render",t]]);export{d as __pageData,F as default};
